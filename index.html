<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Wire | Real-time News</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.10.3/cdn.min.js" defer></script>
    <style>
        /* Hide scrollbar for cleaner UI */
        body::-webkit-scrollbar { width: 8px; }
        body::-webkit-scrollbar-track { background: #1a202c; }
        body::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 4px; }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 font-sans antialiased min-h-screen">

    <div x-data="newsFeed()" x-init="fetchNews()" class="container mx-auto px-4 py-8 max-w-7xl">
        
        <div class="flex flex-col md:flex-row justify-between items-center mb-10 sticky top-0 z-50 bg-slate-900/95 backdrop-blur py-4 border-b border-slate-800">
            <div class="mb-4 md:mb-0">
                <h1 class="text-4xl font-black tracking-tighter text-white">
                    GLOBAL<span class="text-blue-500">WIRE</span>.
                </h1>
                <p class="text-slate-400 text-sm">Aggregated Intelligence from Top Sources</p>
            </div>
            
            <div class="relative w-full md:w-96">
                <input 
                    x-model="search" 
                    type="text" 
                    placeholder="Filter (e.g., 'Ukraine', 'Tech', 'Reuters')..." 
                    class="w-full bg-slate-800 border border-slate-700 rounded-lg py-3 px-4 pl-10 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition shadow-lg"
                >
                <svg class="w-5 h-5 text-slate-400 absolute left-3 top-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
        </div>

        <div class="flex justify-between items-center mb-6 text-xs font-mono text-slate-500">
            <span x-text="'SOURCES: ' + [...new Set(items.map(i => i.source))].join(', ')"></span>
            <span x-text="'UPDATED: ' + lastUpdate"></span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <template x-for="article in filteredItems" :key="article.link">
                <a :href="article.link" target="_blank" class="group block bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-blue-500 hover:shadow-blue-500/20 hover:shadow-xl transition duration-300 relative flex flex-col h-full">
                    
                    <div class="p-5 flex flex-col h-full">
                        <div class="flex justify-between items-start mb-3">
                            <span 
                                class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide"
                                :class="{
                                    'bg-orange-500/20 text-orange-400': article.source === 'Reuters',
                                    'bg-red-500/20 text-red-400': article.source === 'BBC World',
                                    'bg-yellow-500/20 text-yellow-400': article.source === 'Al Jazeera',
                                    'bg-blue-500/20 text-blue-400': article.source === 'AP News',
                                    'bg-gray-700 text-gray-300': !['Reuters','BBC World','Al Jazeera','AP News'].includes(article.source)
                                }"
                                x-text="article.source">
                            </span>
                            <span class="text-slate-500 text-xs" x-text="article.date"></span>
                        </div>

                        <h2 class="text-lg font-bold leading-snug mb-2 group-hover:text-blue-400 transition" x-text="article.title"></h2>
                        
                        <p class="text-slate-400 text-sm leading-relaxed mb-4 line-clamp-3" x-text="article.summary"></p>
                        
                        <div class="mt-auto pt-4 border-t border-slate-700/50 flex items-center text-blue-500 text-sm font-medium">
                            Read Article 
                            <svg class="w-4 h-4 ml-1 transform group-hover:translate-x-1 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                        </div>
                    </div>
                </a>
            </template>
        </div>

        <div x-show="filteredItems.length === 0" class="text-center py-20">
            <p class="text-slate-500 text-lg">No news found matching your search.</p>
        </div>
    </div>

    <script>
        function newsFeed() {
            return {
                items: [],
                search: '',
                lastUpdate: new Date().toLocaleTimeString(),
                
                async fetchNews() {
                    try {
                        // Cache busting to ensure we get fresh news
                        const res = await fetch('news.json?' + new Date().getTime());
                        this.items = await res.json();
                    } catch (e) {
                        console.error("News load failed", e);
                    }
                },

                get filteredItems() {
                    if (this.search === '') return this.items;
                    const q = this.search.toLowerCase();
                    return this.items.filter(i => 
                        i.title.toLowerCase().includes(q) || 
                        i.source.toLowerCase().includes(q) ||
                        i.summary.toLowerCase().includes(q)
                    );
                }
            }
        }
    </script>
</body>
</html>
